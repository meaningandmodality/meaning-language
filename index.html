<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home | Meaning & Modality Lab</title>
    <link rel="stylesheet" href="CSS/style.css">
</head>
<body>

<!-- Inserting header from header.html stored in /partials. Use JavaScript -->
<div id="header"></div>

    <div id="main-content">
        <!-- Content will be loaded here dynamically -->
    </div>
    
    <div id="footer"></div>
        <script>
                fetch("partials/header.html")
                    .then(response => response.text())
                    .then(data => {
                        document.getElementById("header").innerHTML = data;
                    });

                fetch("partials/footer.html")
                    .then(response => response.text())
                    .then(data => {
                        document.getElementById("footer").innerHTML = data;
                    });
            function loadPage(page) {
                fetch(page)
                .then(response => response.text())
                .then(data => {
                    document.getElementById("main-content").innerHTML = data;
                    window.scrollTo(0, 0); // scroll to top
                });
            } 
            // Load the home page by default
            window.onload = () => {
                loadPage('home.html');
            };   
        
            //Function to load publications from text file
            function loadPublications() {
                fetch('data/publications.txt')
                .then(res => res.text())
                .then(text => {
                    const lines = text.trim().split('\n');
                    let html = '';
                    let currentYear = '';

                    lines.forEach(line => {
                    if (/^\d{4}$/.test(line)) {
                        if (currentYear) html += '</ul>';
                        currentYear = line;
                        html += `<h3>${currentYear}</h3><ul>`;
                    } else if (line.trim()) {
                        const [authors, title, venue, file] = line.split('|').map(p => p.trim());
                        html += `<li><strong>${authors}</strong> ${title} ${venue ? venue : ''} <a href="Documents/${file}">[${file.split('.').pop()}]</a></li>`;
                    }
                    });

                    html += '</ul>';
                    document.getElementById('main-content').innerHTML = html;
                });
            }

            //Function to load research from text file
            function loadResearch() {
                fetch('data/research.txt')
                .then(res => res.text())
                .then(text => {
                    const lines = text.trim().split('\n');
                    let html = '';

                    lines.forEach(line => {
                    if (line.trim()) {
                        const [project, description, info] = line.split('|').map(p => p.trim());
                        html += `<li><strong>${project}</strong> ${description}''} <a href="Documents/${info}">[${info.split('.').pop()}]</a></li>`;
                        }
                    });

                    html += '</ul>';
                    document.getElementById('main-content').innerHTML = html;
                });
            }
        </script>

</body>
</html>